---
title: TrueType 字体语法说明
author: 蓝落萧
date: \today
---

## TrueType 字体构成

TrueType 字体由多段一次或三次 Bezier 曲线构成：

- 一次曲线由起点、终点构成；
- 三次曲线由起点、终点、控制点 1 和控制点 2 构成；

一次曲线（即直线）就是连接起点和终点的直线，而三次曲线是一条参数曲线并由下式给出：

$$
\mathbf b_3(t)=\mathbf P_1(1-t)^3+\mathbf P_23t(1-t)^2+\mathbf P_33t^2(1-t)+\mathbf P_4t^3
$$

## 坐标系

- $x$ 轴正方向为右方，格点取值为 $0$ 至 $1000$；
- $y$ 轴正方向为上方，格点取值为 $-100$ 至 $900$；

## 命令

### 移动类

- `hmove(x)`：横向移动 `x` 个格点；
- `vmove(y)`：纵向移动 `y` 个格点；
- `rmove(x, y)`：横向移动 `x` 个格点，然后纵向 `y` 个格点；

### 直线类


- `hline(x1, [y1, ...])`：横向绘制长 `x` 的线段；其余可选参数按 `y1, x2, y2, x3, ...` 交替出现，即然后纵向 `y1` 的线段，依此类推；
- `vline(y1, [x1, ...])`：纵向绘制长 `y` 的线段，其余与 `hline()` 类似；
- `rline(x1, y1, [x2, y2, ...])`：绘制直线段使其横向位移为 `x1`，纵向位移为 `y1`，其余类似；

### 曲线类

- `hvcurve(x1, y1, x2, y2)`：横向移动 `x1` 个格点到达第一个控制点，然后纵向移动 `y1`、横向移动 `x2` 达到第二个控制点，最后纵向移动 `y2` 到达终点，由此确定了一条 Bezier 曲线；
- `vhcurve(y1, x1, y2, x2)`：类似；
- `hhcurve(x1, x2, y1, x3)`：横向移动 `x1` 个格点到达第一个控制点，然后横向移动 `x2`、纵向移动 `y1` 达到第二个控制点，最后横向移动 `x3` 到达终点，由此确定了一条 Bezier 曲线；
- `vvcurve(y1, y2, x1, x3)`：类似；
- `rrcurve(x1, y1, x2, y2, x3, y3, [x4, y4, ...])`：移动 `(x1, y1)` 到达第一个控制点，移动 `(x2, y2)` 到达第二个控制点，移动 `(x3, y3)` 到达终点，然后循环往复；

### 复合类

- `rlinecurve(x1, y1, x2, y2, x3, y3, [x4, y4, ...], x0, y0)`：相当于 `rrcurve(x1, y1, x2, y2, x3, y3, [x4, y4, ...])` 和 `rline(x0, y0)` 的复合；
- `rcurveline(x0, y0, x1, y1, x2, y2, x3, y3, [x4, y4, ...])`：相当于 `rline(x0, y0)` 和  `rrcurve(x1, y1, x2, y2, x3, y3, [x4, y4, ...])` 的复合。